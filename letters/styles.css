:root{
  --bg1:#ffd2e8; --bg2:#ffb6d5; --accent:#ff69b4; --text:#3a1633; --muted:#7a4660; --white:#fff;
}

*{ box-sizing:border-box }
html,body{ height:100%; margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial }
body{
  background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
  color: var(--text);
  display:flex; align-items:center; justify-content:center;
  padding: 18px;
}

.wrap{ width:100%; max-width:980px }
header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:14px }
h1{ margin:0; font-size:20px; color:var(--white); text-shadow:0 2px 6px rgba(255,255,255,0.08) }
.subtitle{ font-size:13px; color:var(--white); opacity:.95 }

.home{
  background: rgba(255,255,255,0.06);
  border-radius: 18px;
  padding: 18px;
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 8px 30px rgba(195,69,132,0.12);
}

.grid{
  display:grid;
  grid-template-columns: repeat(4,1fr);
  gap: 18px;
}
@media (max-width:820px){ .grid{ grid-template-columns: repeat(3,1fr) } }
@media (max-width:560px){ .grid{ grid-template-columns: repeat(2,1fr) } }

/* ==== Envelope ==== */
.env{
  --w:110px; --h:80px;
  width:var(--w); height:var(--h);
  margin:auto; position:relative; cursor:pointer;
  border-radius:10px;
  background: linear-gradient(180deg,#fff,#ffe6f2);
  display:flex; align-items:center; justify-content:center;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12), inset 0 -6px 18px rgba(255,182,203,0.08);
  transition: transform .35s cubic-bezier(.2,.9,.25,1), box-shadow .25s;
  touch-action: manipulation;
}
.env:active{ transform:scale(.98) }
.env.bob{ animation:bob 3s infinite }
@keyframes bob{ 0%{transform:translateY(0)} 50%{transform:translateY(-8px)} 100%{transform:translateY(0)} }

.flap{
  position:absolute; top:6px; left:6px; right:6px; height:50%;
  background: linear-gradient(180deg,#ffdff0,#ffe6f5);
  border-radius:8px 8px 0 0;
  transform-origin: top center;
  transition: transform .45s cubic-bezier(.2,.9,.25,1);
  z-index:3;
}
.body{
  position:absolute; bottom:6px; left:6px; right:6px; top: calc(6px + 25%);
  border-radius:0 0 8px 8px;
  background: linear-gradient(180deg,#fff,#fff7fb);
  z-index:1;
}
.env.open .flap{ transform: rotateX(180deg) translateY(-8px) }

.env .seal{
  width:34px; height:34px; border-radius:50%;
  background: radial-gradient(circle at 30% 25%, #fff4f9, var(--accent));
  position:absolute; bottom:12px; left:50%; transform:translateX(-50%);
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 2px 6px rgba(255,105,180,0.18);
  font-weight:700; color:var(--white);
}

.label{ text-align:center; margin-top:10px; font-weight:700; color:var(--muted) }
.type{ font-size:12px; color:var(--muted); margin-top:6px }

/* Locked badge */
.locked{ position:relative }
.locked .lock{
  position:absolute; top:6px; right:8px;
  background: rgba(255,255,255,0.92); color: var(--accent);
  padding:6px; border-radius:8px; font-weight:800;
  box-shadow:0 4px 12px rgba(0,0,0,0.12);
}

/* Reader */
.reader{
  display:none; padding:18px; border-radius:14px;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), #fff);
  color:var(--text);
  box-shadow: 0 12px 40px rgba(138,46,97,0.12);
}
.reader.show{ display:block; animation: fadeScale .35s ease-out }
@keyframes fadeScale{ from{opacity:0; transform:scale(.98)} to{opacity:1; transform:scale(1)} }

.letter-head{ display:flex; align-items:center; justify-content:space-between }
.big-title{ font-size:18px; margin:0 }
.small-muted{ font-size:12px; color:#7a4660 }
.content{ margin-top:14px; white-space:pre-wrap; font-size:16px }

.copy-btn{
  padding:8px; border-radius:8px; border:0; background:#fff; color:var(--accent); font-weight:800;
}
.reader .back{
  margin-top:18px; padding:10px; border-radius:10px; border:0;
  background: linear-gradient(90deg, var(--accent), #ff8ccf);
  color: var(--white); font-weight:800;
}

/* Sparkle */
.sparkle{ position:absolute; inset:0; pointer-events:none }
.sparkle i{
  position:absolute; width:6px; height:6px; background:var(--white);
  opacity:0.9; border-radius:2px; transform:rotate(30deg);
  box-shadow:0 0 8px rgba(255,255,255,0.6)
}

/* Footer */
footer{ margin-top:12px; color:#7a4660; font-size:13px; text-align:center }

/* Bot√≥n volver */
.btn-home{
  position: fixed; left: 16px; bottom: 16px; z-index: 10;
  color: var(--text); text-decoration: none; font-weight: 800;
  background: rgba(255,255,255,.6);
  border: 1px solid rgba(255,255,255,.9);
  padding: 8px 12px; border-radius: 12px;
}

/* Safe areas iOS */
@supports (padding: max(0px)){
  body{
    padding-left: max(18px, env(safe-area-inset-left));
    padding-right: max(18px, env(safe-area-inset-right));
    padding-bottom: max(18px, env(safe-area-inset-bottom));
  }
}
